<?xml version="1.0" encoding="UTF-8" ?>
<Module>
  <ModulePrefs title="Kaltura Wave"
               height="390"
               author="papyromancer"
               author_email="papyromancer@lightcorp.net">
    <Require feature="wave" />
    <Require feature="dynamic-height" />
    <Require feature="tabs" />
    <Require feature="flash" />
  </ModulePrefs>
  <Content type="html">
    <![CDATA[
      <div id="player" style="display:none">
        <div id="kplayer"></div>
      </div>
      <div id="editor"style="display:none">Editor Goes Here</div>
      <div id="media_adder" style="display:none">
        <h1>Media Management</h1>
        <p>Media Management, by virtue of its user centric and user specific nature of allowing users to add files from their own computer terminals, is a private action.  While the wave state is shared within the editing and playback tabs, adding media is a purely personal task, and exposing the add media widget to group editing is likely to cause innumerable probs.</p>
        <p>Neither the switch to the 'Add Media' tab nor the state of the 'Add Media' widget shall ever be recorded within the wave state.</p>
        <p>Media management is not available to wave state.</p>
      </div>
      <div id="debug"style="display:none">
        <h1>Wave State Debug</h1>
        <p>All variables stored in the wave state are listed here.</p>
      </div>
      
      <script type="text/javascript" src="js/jquery-1.2.6.min.js"></script>

      <script type="text/javascript">
        // Set Player as default tab
        var tabs = new gadgets.TabSet(__MODULE_ID__, "Play");
        
        // Init!
        function init() {
          // Define Tabs
          tabs.addTab("Play", {
                              contentContainer: document.getElementById("player")
                              });
          tabs.addTab("Edit", {
                              contentContainer: document.getElementById("editor")
                              });
          tabs.addTab("Add Media", {
                              contentContainer: document.getElementById("media_adder")
                              });
          tabs.addTab("Debug", {
                              contentContainer: document.getElementById("debug")
                              });

        };
        // Call init function to initialize and display tabs.
        gadgets.util.registerOnLoadHandler(init);

        // Set Variables for kplayer
        var kparams = {
                      allowscriptaccess: "always",
                      allownetworking: "all",
                      allowfullscreen: "true",
                      wmode: "opaque",
                      width: "400",
                      height: "290"
                      };
        var kflashVars = {
                      entry_id: "knrwbq7z4o"
                      };
        
        // embed kplayer
        gadgets.flash.embedFlash("http://www.kaltura.com/kwidget/wid/_39061/ui_conf_id/1008311", "kplayer", kflashVars, kparams );

        </script>
    ]]>
  </Content>
</Module>
